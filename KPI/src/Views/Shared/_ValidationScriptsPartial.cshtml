<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js"></script>

<script>
    // Thêm hàm validation tùy chỉnh
    $(document).ready(function () {
        // Hiển thị tất cả các lỗi validation trong thẻ summary
        $.validator.setDefaults({
            errorElement: 'span',
            errorClass: 'text-danger',
            highlight: function (element, errorClass, validClass) {
                $(element).addClass('is-invalid').removeClass('is-valid');
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).removeClass('is-invalid').addClass('is-valid');
            }
        });

        // Thêm phương thức validation cho ngày
        $.validator.addMethod('dateGreaterThan', function (value, element, params) {
            if (!value || !$(params).val()) return true;

            var startDate = new Date($(params).val());
            var endDate = new Date(value);

            return endDate > startDate;
        }, 'Ngày kết thúc phải sau ngày bắt đầu');

        // Đăng ký adapter với unobtrusive validation
        $.validator.unobtrusive.adapters.add('dategreaterthan', ['startdate'], function (options) {
            options.rules['dateGreaterThan'] = '#' + options.params.startdate;
            options.messages['dateGreaterThan'] = options.message;
        });
    });
</script>
