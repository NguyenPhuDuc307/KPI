@model KPISolution.Models.ViewModels.Dashboard.CustomDashboardViewModel

@{
    ViewData["Title"] = "Tạo bảng điều khiển mới";
}

<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-md-8 offset-md-2">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="h3 mb-0">Tạo bảng điều khiển mới</h1>
                <a asp-action="Custom" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left me-1"></i>Quay lại
                </a>
            </div>

            <div class="card">
                <div class="card-body">
                    <form asp-action="Create" method="post">
                        <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                        <div class="mb-3">
                            <label asp-for="Title" class="form-label">Tiêu đề bảng điều khiển</label>
                            <input asp-for="Title" class="form-control" placeholder="Ví dụ: Bảng điều khiển của tôi" required />
                            <span asp-validation-for="Title" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="Description" class="form-label">Mô tả</label>
                            <textarea asp-for="Description" class="form-control" rows="3" placeholder="Mô tả ngắn về mục đích của bảng điều khiển này"></textarea>
                            <span asp-validation-for="Description" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Giao diện ban đầu</label>
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <div class="form-check custom-radio">
                                        <input class="form-check-input" type="radio" name="LayoutTemplate" id="layout1" value="Standard" checked>
                                        <label class="form-check-label" for="layout1">
                                            <div class="card border">
                                                <div class="card-body p-2 text-center">
                                                    <div class="layout-preview standard-layout"></div>
                                                    <div class="mt-2">Chuẩn</div>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-check custom-radio">
                                        <input class="form-check-input" type="radio" name="LayoutTemplate" id="layout2" value="KPI">
                                        <label class="form-check-label" for="layout2">
                                            <div class="card border">
                                                <div class="card-body p-2 text-center">
                                                    <div class="layout-preview kpi-layout"></div>
                                                    <div class="mt-2">KPI</div>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-check custom-radio">
                                        <input class="form-check-input" type="radio" name="LayoutTemplate" id="layout3" value="Performance">
                                        <label class="form-check-label" for="layout3">
                                            <div class="card border">
                                                <div class="card-body p-2 text-center">
                                                    <div class="layout-preview performance-layout"></div>
                                                    <div class="mt-2">Hiệu suất</div>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-check custom-radio">
                                        <input class="form-check-input" type="radio" name="LayoutTemplate" id="layout4" value="Empty">
                                        <label class="form-check-label" for="layout4">
                                            <div class="card border">
                                                <div class="card-body p-2 text-center">
                                                    <div class="layout-preview empty-layout"></div>
                                                    <div class="mt-2">Trống</div>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input asp-for="IsDefault" class="form-check-input" />
                                <label asp-for="IsDefault" class="form-check-label">Đặt làm bảng điều khiển mặc định</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input asp-for="IsPublic" class="form-check-input" />
                                <label asp-for="IsPublic" class="form-check-label">Công khai với mọi người</label>
                                <div class="form-text">Bảng điều khiển công khai có thể xem bởi tất cả người dùng trong tổ chức.</div>
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a asp-action="Custom" class="btn btn-outline-secondary me-md-2">Hủy</a>
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-plus-circle me-1"></i>Tạo bảng điều khiển
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
        <style>
            .custom-radio input {
                position: absolute;
                opacity: 0;
                height: 0;
                width: 0;
            }

            .custom-radio input:checked + label .card {
                border-color: var(--bs-primary) !important;
                box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25);
            }

            .layout-preview {
                height: 100px;
                border-radius: 3px;
                border: 1px dashed #ccc;
                margin-bottom: 5px;
                background-repeat: no-repeat;
                background-position: center;
                background-size: contain;
            }

            .standard-layout {
                background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="100" viewBox="0 0 120 100"><rect x="5" y="5" width="50" height="40" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="65" y="5" width="50" height="40" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="5" y="55" width="110" height="40" rx="2" fill="%23f0f0f0" stroke="%23ccc"/></svg>');
            }

            .kpi-layout {
                background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="100" viewBox="0 0 120 100"><rect x="5" y="5" width="25" height="25" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="35" y="5" width="25" height="25" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="65" y="5" width="25" height="25" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="95" y="5" width="25" height="25" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="5" y="35" width="50" height="60" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="60" y="35" width="55" height="60" rx="2" fill="%23f0f0f0" stroke="%23ccc"/></svg>');
            }

            .performance-layout {
                background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="100" viewBox="0 0 120 100"><rect x="5" y="5" width="55" height="40" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="65" y="5" width="50" height="40" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="5" y="50" width="35" height="45" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="45" y="50" width="35" height="45" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><rect x="85" y="50" width="30" height="45" rx="2" fill="%23f0f0f0" stroke="%23ccc"/></svg>');
            }

            .empty-layout {
                background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="100" viewBox="0 0 120 100"><rect x="5" y="5" width="110" height="90" rx="2" fill="%23f0f0f0" stroke="%23ccc"/><text x="60" y="55" text-anchor="middle" font-family="Arial" font-size="12" fill="%23aaa">Trống</text></svg>');
            }
        </style>
}

@section Scripts {
        <partial name="_ValidationScriptsPartial" />
}