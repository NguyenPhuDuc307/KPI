@model KPISolution.Models.ViewModels.CSF.CreateCsfViewModel

@{
    ViewData["Title"] = "Create CSF";
    ViewData["Icon"] = "bi-star-fill";
    ViewData["Subtitle"] = "Create Critical Success Factor (CSF)";
}

<div class="container-fluid">
    <div class="alert alert-info mb-4">
        <div class="d-flex align-items-center">
            <i class="bi bi-info-circle me-2 fs-5"></i>
            <div>
                <strong>Critical Success Factor (CSF)</strong> là những yếu tố quan trọng nhất để đạt được mục tiêu kinh
                doanh.
                <br>Bạn có thể tạo CSF trực tiếp hoặc chuyển đổi một SF thành CSF bằng cách đánh dấu vào tùy chọn "Là
                yếu tố thành công quan trọng" khi tạo SF.
            </div>
        </div>
    </div>

    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">
                <i class="@ViewData["Icon"] me-1"></i>
                Critical Success Factor Information
            </h6>
        </div>
        <div class="card-body">
            <form asp-action="Create" method="post">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label asp-for="Code" class="control-label">Mã CSF <span
                                    class="text-danger">*</span></label>
                            <input asp-for="Code" class="form-control" placeholder="Ví dụ: CSF-HR-001" />
                            <span asp-validation-for="Code" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label asp-for="Name" class="control-label">Tên CSF <span
                                    class="text-danger">*</span></label>
                            <input asp-for="Name" class="form-control" placeholder="Nhập tên CSF" />
                            <span asp-validation-for="Name" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label asp-for="DepartmentId" class="control-label">Phòng ban</label>
                            <select asp-for="DepartmentId" asp-items="Model.Departments" class="form-control select2">
                                <option value="">-- Chọn phòng ban --</option>
                            </select>
                            <span asp-validation-for="DepartmentId" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label asp-for="Category" class="control-label">Danh mục <span
                                    class="text-danger">*</span></label>
                            <select asp-for="Category" class="form-control select2"
                                asp-items="Html.GetEnumSelectList<KPISolution.Models.Enums.CSFCategory>()">
                                <option value="">-- Chọn danh mục --</option>
                            </select>
                            <span asp-validation-for="Category" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label asp-for="BusinessObjectiveId" class="control-label">Mục tiêu kinh doanh</label>
                            <select asp-for="BusinessObjectiveId" asp-items="Model.BusinessObjectives"
                                class="form-control select2">
                                <option value="">-- Chọn mục tiêu --</option>
                            </select>
                            <span asp-validation-for="BusinessObjectiveId" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group">
                            <label asp-for="Priority" class="control-label">Mức độ ưu tiên <span
                                    class="text-danger">*</span></label>
                            <select asp-for="Priority" class="form-control select2"
                                asp-items="Html.GetEnumSelectList<KPISolution.Models.Enums.PriorityLevel>()">
                                <option value="">-- Chọn mức độ ưu tiên --</option>
                            </select>
                            <span asp-validation-for="Priority" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label asp-for="Status" class="control-label">Trạng thái <span
                                    class="text-danger">*</span></label>
                            <select asp-for="Status" class="form-control select2"
                                asp-items="Html.GetEnumSelectList<KPISolution.Models.Enums.CSFStatus>()">
                                <option value="">-- Chọn trạng thái --</option>
                            </select>
                            <span asp-validation-for="Status" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label asp-for="RiskLevel" class="control-label">Mức độ rủi ro <span
                                    class="text-danger">*</span></label>
                            <select asp-for="RiskLevel" class="form-control select2"
                                asp-items="Html.GetEnumSelectList<KPISolution.Models.Enums.RiskLevel>()">
                                <option value="">-- Chọn mức độ rủi ro --</option>
                            </select>
                            <span asp-validation-for="RiskLevel" class="text-danger"></span>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label asp-for="StartDate" class="control-label">Ngày bắt đầu <span
                                        class="text-danger">*</span></label>
                                <input asp-for="StartDate" class="form-control" type="date" />
                                <span asp-validation-for="StartDate" class="text-danger"></span>
                            </div>

                            <div class="form-group col-md-6">
                                <label asp-for="TargetDate" class="control-label">Ngày hoàn thành <span
                                        class="text-danger">*</span></label>
                                <input asp-for="TargetDate" class="form-control" type="date" />
                                <span asp-validation-for="TargetDate" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label asp-for="Owner" class="control-label">Người phụ trách</label>
                            <input asp-for="Owner" class="form-control" placeholder="Nhập tên người phụ trách" />
                            <span asp-validation-for="Owner" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label asp-for="Description" class="control-label">Mô tả <span class="text-danger">*</span></label>
                    <textarea asp-for="Description" class="form-control" rows="3"
                        placeholder="Mô tả chi tiết về CSF"></textarea>
                    <span asp-validation-for="Description" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="SuccessCriteria" class="control-label">Tiêu chí thành công</label>
                    <textarea asp-for="SuccessCriteria" class="form-control" rows="3"
                        placeholder="Các tiêu chí để đánh giá sự thành công của CSF"></textarea>
                    <span asp-validation-for="SuccessCriteria" class="text-danger"></span>
                </div>

                <hr />

                <div class="form-group">
                    <label>KPIs liên quan</label>
                    <select asp-for="SelectedKpiIds" asp-items="Model.AvailableKpis" class="form-control select2"
                        multiple>
                    </select>
                    <small class="form-text text-muted">Chọn các KPI liên quan đến CSF này</small>
                </div>

                <div class="form-group text-right">
                    <a asp-action="Index" class="btn btn-secondary">
                        <i class="bi bi-x-circle me-1"></i> Hủy
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-save me-1"></i> Lưu
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('.select2').select2({
                theme: 'bootstrap-5',
                width: '100%',
                dropdownParent: $('body'),
                placeholder: "Chọn một giá trị",
                allowClear: true
            });
        });
    </script>
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}